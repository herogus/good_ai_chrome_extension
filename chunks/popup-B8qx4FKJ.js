import{d as _,u as y,a as N,r as M,t as P,c as C,o as h,b as R,s as g,e as v,f as c,g as e,h as f,F as U,i as V,n as l,j as m,k as r,l as p,_ as k,m as q,A as z,w as D,p as L,q as O,v as j,x as w,y as G,z as H}from"./encryptionUtil-B6a1Xhnw.js";const J={class:"theme-settings"},K={class:"setting-group"},Q={class:"setting-item"},X={class:"theme-options"},Y=["onClick"],Z={class:"theme-icon-wrapper"},uu={class:"theme-icon"},eu={class:"option-label"},su={class:"setting-item floating-window-settings"},tu={class:"floating-controls"},au={class:"control-section"},ou={class:"radio-options"},nu={class:"control-section"},iu={class:"radio-options"},lu=_({__name:"SystemSettings",setup($){const o=y(),{themeConfig:i,setTheme:d}=N(),n=[{value:"light",label:"\u4EAE\u8272",icon:"\u{1F31E}"},{value:"dark",label:"\u6697\u8272",icon:"\u{1F319}"}],E=M({disableState:"enabled",isRefreshing:!1}),{disableState:a,isRefreshing:B}=P(E),x=C(()=>i.value.mode);C(()=>{switch(a.value){case"local":return"\u{1F512}";case"page":return"\u26A0\uFE0F";default:return"\u2705"}}),C(()=>{switch(a.value){case"local":return"\u60AC\u6D6E\u7A97\u5168\u5C40\u88AB\u7981\u7528";case"page":return"\u5F53\u524D\u9875\u9762\u88AB\u7981\u7528";default:return"\u60AC\u6D6E\u7A97\u5DF2\u5168\u5C40\u542F\u7528"}}),h(async()=>{await A();const s=setInterval(A,5e3);R(()=>{clearInterval(s)})});const T=async s=>{try{d(s),o.info("\u4E3B\u9898\u8BBE\u7F6E\u5DF2\u66F4\u65B0:",s);try{(await g("setTheme",{theme:s})).status==="success"&&o.info("\u4E3B\u9898\u5DF2\u540C\u6B65\u5230\u6807\u7B7E\u9875")}catch(u){o.warn("\u4E3B\u9898\u540C\u6B65\u5230\u6807\u7B7E\u9875\u5931\u8D25\uFF0C\u4F46\u8BBE\u7F6E\u5DF2\u4FDD\u5B58:",u)}}catch(u){o.error("\u4E3B\u9898\u5207\u6362\u5931\u8D25:",u),p("\u4E3B\u9898\u5207\u6362\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}};async function A(){if(!B.value){B.value=!0;try{const s=await g("checkFloatingWindowState",{});s.data.localDisabled?a.value="local":s.data.pageDisabled?a.value="page":a.value="enabled",o.info("\u60AC\u6D6E\u7A97\u72B6\u6001\u68C0\u67E5\u5B8C\u6210:",a.value)}catch(s){o.error("\u68C0\u67E5\u60AC\u6D6E\u7A97\u7981\u7528\u72B6\u6001\u5931\u8D25\u2014popup:",s),a.value="enabled"}finally{B.value=!1}}}async function F(s,u){try{const t=await g("setFloatingWindowState",{scope:s,disabled:u});if(t.status==="failed")throw new Error(t.message||"\u8BBE\u7F6E\u60AC\u6D6E\u7A97\u72B6\u6001\u5931\u8D25");s==="local"?a.value=u?"local":"enabled":a.value=u?"page":"enabled",p(`${s==="local"?"\u5168\u5C40":"\u5F53\u524D\u9875\u9762"}\u60AC\u6D6E\u7A97\u5DF2${u?"\u9690\u85CF":"\u663E\u793A"}\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u67E5\u770B\u6548\u679C`),o.info(`\u60AC\u6D6E\u7A97\u72B6\u6001\u5207\u6362\u6210\u529F: ${s} - ${u?"\u7981\u7528":"\u542F\u7528"}`)}catch(t){o.error(`\u5207\u6362\u60AC\u6D6E\u7A97\u72B6\u6001\u5931\u8D25\uFF08${s}\uFF09:`,t),p("\u8BBE\u7F6E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\uFF01")}}async function I(){var s;try{const u=await chrome.tabs.query({active:!0,currentWindow:!0});if((s=u[0])!=null&&s.id)await chrome.sidePanel.open({tabId:u[0].id}),o.info("\u4FA7\u8FB9\u680F\u6253\u5F00\u6210\u529F");else throw new Error("\u672A\u627E\u5230\u5F53\u524D\u6807\u7B7E\u9875")}catch(u){o.error("\u6253\u5F00\u4FA7\u8FB9\u680F\u5931\u8D25:",u),p("\u6253\u5F00\u4FA7\u8FB9\u680F\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}}return(s,u)=>(c(),v("div",J,[e("div",K,[u[13]||(u[13]=e("div",{class:"group-title"},[e("span",{class:"title-icon"},"\u2699\uFE0F"),f(" \u7CFB\u7EDF\u8BBE\u7F6E ")],-1)),e("div",Q,[u[4]||(u[4]=e("div",{class:"setting-label"},"\u5916\u89C2\u6A21\u5F0F",-1)),e("div",X,[(c(),v(U,null,V(n,t=>e("div",{key:t.value,class:l(["theme-option",{active:x.value===t.value}]),onClick:W=>T(t.value)},[e("div",Z,[e("span",uu,m(t.icon),1)]),e("span",eu,m(t.label),1)],10,Y)),64))])]),e("div",{class:"setting-item sidepanel-settings"},[u[6]||(u[6]=e("div",{class:"setting-label"},"\u4FA7\u8FB9\u680F\u63A7\u5236",-1)),e("div",{class:"sidepanel-controls"},[e("div",{class:"control-button-group"},[e("button",{class:"control-button open-button",onClick:I},u[5]||(u[5]=[e("span",{class:"button-icon"},"\u{1F441}\uFE0F",-1),e("span",{class:"button-text"},"\u5C55\u793A\u4FA7\u8FB9\u680F",-1)]))])])]),u[14]||(u[14]=e("div",{class:"group-title"},[e("span",{class:"title-icon"},"\u{1FA9F}"),f(" \u60AC\u6D6E\u7A97\u8BBE\u7F6E ")],-1)),e("div",su,[e("div",tu,[e("div",au,[u[9]||(u[9]=e("div",{class:"control-label"},"\u5F53\u524D\u9875\u9762",-1)),e("div",ou,[e("div",{class:l(["radio-option",{active:r(a)==="enabled"}]),onClick:u[0]||(u[0]=t=>F("page",!1))},u[7]||(u[7]=[e("div",{class:"radio-icon-wrapper"},[e("span",{class:"radio-icon"},"\u{1F441}\uFE0F")],-1),e("span",{class:"option-label"},"\u663E\u793A\u60AC\u6D6E\u7A97",-1)]),2),e("div",{class:l(["radio-option",{active:r(a)==="page"}]),onClick:u[1]||(u[1]=t=>F("page",!0))},u[8]||(u[8]=[e("div",{class:"radio-icon-wrapper"},[e("span",{class:"radio-icon"},"\u{1F648}")],-1),e("span",{class:"option-label"},"\u9690\u85CF\u60AC\u6D6E\u7A97",-1)]),2)])]),e("div",nu,[u[12]||(u[12]=e("div",{class:"control-label"},"\u5168\u5C40\u8BBE\u7F6E",-1)),e("div",iu,[e("div",{class:l(["radio-option",{active:r(a)==="enabled"}]),onClick:u[2]||(u[2]=t=>F("local",!1))},u[10]||(u[10]=[e("div",{class:"radio-icon-wrapper"},[e("span",{class:"radio-icon"},"\u{1F513}")],-1),e("span",{class:"option-label"},"\u5168\u5C40\u542F\u7528",-1)]),2),e("div",{class:l(["radio-option",{active:r(a)==="local"}]),onClick:u[3]||(u[3]=t=>F("local",!0))},u[11]||(u[11]=[e("div",{class:"radio-icon-wrapper"},[e("span",{class:"radio-icon"},"\u{1F512}")],-1),e("span",{class:"option-label"},"\u5168\u5C40\u7981\u7528",-1)]),2)])])])])])]))}}),b=k(lu,[["__scopeId","data-v-376a8f13"]]),ru={class:"popup-container"},cu={key:1},du=_({__name:"Popup",setup($){const o=y(),i=q("");return h(async()=>{const d=new z;try{const n=await d.decrypt(D.content,D.contentEx);i.value=n.trim()}catch(n){o.error("\u6C34\u5370\u89E3\u5BC6\u5931\u8D25:",n)}}),(d,n)=>{const E=L("el-watermark");return c(),v("div",ru,[r(D).enabled&&i.value?(c(),O(E,{key:0,content:i.value,opacity:.1},{default:j(()=>[w(b)]),_:1},8,["content"])):(c(),v("div",cu,[w(b)]))])}}}),Fu=k(du,[["__scopeId","data-v-25d19947"]]),S=G(Fu);S.use(H);S.mount("#app");
