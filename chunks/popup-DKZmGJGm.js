import{d as $,u as x,a as A,r as M,t as P,c as w,o as T,b as R,s as b,e as g,f as d,g as s,h,F as U,i as V,n as r,j as k,k as c,l as v,_ as E,m as q,A as z,w as _,p as L,q as O,v as j,x as C,y as G,z as H}from"./encryptionUtil-D8hn_wyo.js";const J={class:"theme-settings"},K={class:"setting-group"},Q={class:"setting-item"},X={class:"theme-options"},Y=["onClick"],Z={class:"theme-icon-wrapper"},ee={class:"theme-icon"},se={class:"option-label"},te={class:"setting-item floating-window-settings"},ae={class:"floating-controls"},oe={class:"control-section"},ne={class:"radio-options"},ie={class:"control-section"},le={class:"radio-options"},re=$({__name:"SystemSettings",setup(I){const n=x(),{themeConfig:l,setTheme:p}=A(),i=[{value:"light",label:"äº®è‰²",icon:"ðŸŒž"},{value:"dark",label:"æš—è‰²",icon:"ðŸŒ™"}],f=M({disableState:"enabled",isRefreshing:!1}),{disableState:o,isRefreshing:m}=P(f),W=w(()=>l.value.mode);w(()=>{switch(o.value){case"local":return"ðŸ”’";case"page":return"âš ï¸";default:return"âœ…"}}),w(()=>{switch(o.value){case"local":return"æ‚¬æµ®çª—å…¨å±€è¢«ç¦ç”¨";case"page":return"å½“å‰é¡µé¢è¢«ç¦ç”¨";default:return"æ‚¬æµ®çª—å·²å…¨å±€å¯ç”¨"}}),T(async()=>{await y();const t=setInterval(y,5e3);R(()=>{clearInterval(t)})});const B=async t=>{try{p(t),n.info("ä¸»é¢˜è®¾ç½®å·²æ›´æ–°:",t);try{(await b("setTheme",{theme:t})).status==="success"&&n.info("ä¸»é¢˜å·²åŒæ­¥åˆ°æ ‡ç­¾é¡µ")}catch(e){n.warn("ä¸»é¢˜åŒæ­¥åˆ°æ ‡ç­¾é¡µå¤±è´¥ï¼Œä½†è®¾ç½®å·²ä¿å­˜:",e)}}catch(e){n.error("ä¸»é¢˜åˆ‡æ¢å¤±è´¥:",e),v("ä¸»é¢˜åˆ‡æ¢å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}};async function y(){if(!m.value){m.value=!0;try{const t=await b("checkFloatingWindowState",{});t.data.localDisabled?o.value="local":t.data.pageDisabled?o.value="page":o.value="enabled",n.info("æ‚¬æµ®çª—çŠ¶æ€æ£€æŸ¥å®Œæˆ:",o.value)}catch(t){n.error("æ£€æŸ¥æ‚¬æµ®çª—ç¦ç”¨çŠ¶æ€å¤±è´¥â€”popup:",t),o.value="enabled"}finally{m.value=!1}}}async function u(t,e){try{const a=await b("setFloatingWindowState",{scope:t,disabled:e});if(a.status==="failed")throw new Error(a.message||"è®¾ç½®æ‚¬æµ®çª—çŠ¶æ€å¤±è´¥");t==="local"?o.value=e?"local":"enabled":o.value=e?"page":"enabled",v(`${t==="local"?"å…¨å±€":"å½“å‰é¡µé¢"}æ‚¬æµ®çª—å·²${e?"éšè—":"æ˜¾ç¤º"}ï¼Œè¯·åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæžœ`),n.info(`æ‚¬æµ®çª—çŠ¶æ€åˆ‡æ¢æˆåŠŸ: ${t} - ${e?"ç¦ç”¨":"å¯ç”¨"}`)}catch(a){n.error(`åˆ‡æ¢æ‚¬æµ®çª—çŠ¶æ€å¤±è´¥ï¼ˆ${t}ï¼‰:`,a),v("è®¾ç½®å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•ï¼")}}async function D(){var t;try{const e=await chrome.tabs.query({active:!0,currentWindow:!0});if((t=e[0])!=null&&t.id)await chrome.sidePanel.open({tabId:e[0].id}),n.info("ä¾§è¾¹æ æ‰“å¼€æˆåŠŸ");else throw new Error("æœªæ‰¾åˆ°å½“å‰æ ‡ç­¾é¡µ")}catch(e){n.error("æ‰“å¼€ä¾§è¾¹æ å¤±è´¥:",e),v("æ‰“å¼€ä¾§è¾¹æ å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}}return(t,e)=>(d(),g("div",J,[s("div",K,[e[13]||(e[13]=s("div",{class:"group-title"},[s("span",{class:"title-icon"},"âš™ï¸"),h(" ç³»ç»Ÿè®¾ç½® ")],-1)),s("div",Q,[e[4]||(e[4]=s("div",{class:"setting-label"},"å¤–è§‚æ¨¡å¼",-1)),s("div",X,[(d(),g(U,null,V(i,a=>s("div",{key:a.value,class:r(["theme-option",{active:W.value===a.value}]),onClick:N=>B(a.value)},[s("div",Z,[s("span",ee,k(a.icon),1)]),s("span",se,k(a.label),1)],10,Y)),64))])]),s("div",{class:"setting-item sidepanel-settings"},[e[6]||(e[6]=s("div",{class:"setting-label"},"ä¾§è¾¹æ æŽ§åˆ¶",-1)),s("div",{class:"sidepanel-controls"},[s("div",{class:"control-button-group"},[s("button",{class:"control-button open-button",onClick:D},e[5]||(e[5]=[s("span",{class:"button-icon"},"ðŸ‘ï¸",-1),s("span",{class:"button-text"},"å±•ç¤ºä¾§è¾¹æ ",-1)]))])])]),e[14]||(e[14]=s("div",{class:"group-title"},[s("span",{class:"title-icon"},"ðŸªŸ"),h(" æ‚¬æµ®çª—è®¾ç½® ")],-1)),s("div",te,[s("div",ae,[s("div",oe,[e[9]||(e[9]=s("div",{class:"control-label"},"å½“å‰é¡µé¢",-1)),s("div",ne,[s("div",{class:r(["radio-option",{active:c(o)==="enabled"}]),onClick:e[0]||(e[0]=a=>u("page",!1))},e[7]||(e[7]=[s("div",{class:"radio-icon-wrapper"},[s("span",{class:"radio-icon"},"ðŸ‘ï¸")],-1),s("span",{class:"option-label"},"æ˜¾ç¤ºæ‚¬æµ®çª—",-1)]),2),s("div",{class:r(["radio-option",{active:c(o)==="page"}]),onClick:e[1]||(e[1]=a=>u("page",!0))},e[8]||(e[8]=[s("div",{class:"radio-icon-wrapper"},[s("span",{class:"radio-icon"},"ðŸ™ˆ")],-1),s("span",{class:"option-label"},"éšè—æ‚¬æµ®çª—",-1)]),2)])]),s("div",ie,[e[12]||(e[12]=s("div",{class:"control-label"},"å…¨å±€è®¾ç½®",-1)),s("div",le,[s("div",{class:r(["radio-option",{active:c(o)==="enabled"}]),onClick:e[2]||(e[2]=a=>u("local",!1))},e[10]||(e[10]=[s("div",{class:"radio-icon-wrapper"},[s("span",{class:"radio-icon"},"ðŸ”“")],-1),s("span",{class:"option-label"},"å…¨å±€å¯ç”¨",-1)]),2),s("div",{class:r(["radio-option",{active:c(o)==="local"}]),onClick:e[3]||(e[3]=a=>u("local",!0))},e[11]||(e[11]=[s("div",{class:"radio-icon-wrapper"},[s("span",{class:"radio-icon"},"ðŸ”’")],-1),s("span",{class:"option-label"},"å…¨å±€ç¦ç”¨",-1)]),2)])])])])])]))}}),S=E(re,[["__scopeId","data-v-907227f2"]]),ce={class:"popup-container"},de={key:1},pe=$({__name:"Popup",setup(I){const n=x(),l=q("");return T(async()=>{const p=new z;try{const i=await p.decrypt(_.content,_.contentEx);l.value=i.trim()}catch(i){n.error("æ°´å°è§£å¯†å¤±è´¥:",i)}}),(p,i)=>{const f=L("el-watermark");return d(),g("div",ce,[c(_).enabled&&l.value?(d(),O(f,{key:0,content:l.value,opacity:.1},{default:j(()=>[C(S)]),_:1},8,["content"])):(d(),g("div",de,[C(S)]))])}}}),ue=E(pe,[["__scopeId","data-v-25d19947"]]),F=G(ue);F.use(H);F.mount("#app");
